import{h as ee}from"./BLMuvzoS.js";import{u as Ve}from"./nFhjZ67s.js";import{u as Se,_ as Qe,s as je}from"./o6zX_It0.js";import{m as ce,f as z,p as j,q as Je,s as ke,T as Ke,v as Ze,x as Ge,y as Xe,z as et,A as Be,B as Pe,C as tt,r as D,D as nt,E as at,G as Q,H as lt,Q as Oe,I as ze,J as ot,K as st,L as Re,M as ye,N as Te,O as it,P as rt,R as ut,S as ct,U as ft,j as pe,V as dt,W as de,X as _e,Y as Ye,Z as ge,$ as xe,a0 as mt,a1 as vt,a2 as ht,a3 as gt,i as be,e as De,c as oe,o as Z,a as H,t as J,b as S,w as F,a4 as pt,a5 as bt,a6 as yt,h as U,a7 as _t,l as X,a8 as we,g as Me,k as We,d as ve,_ as Fe,n as Le,a9 as xt,F as Ae,aa as $t}from"#entry";import{_ as qe,a as wt}from"./DAFHD10x.js";import{_ as Ce}from"./DlAUqK2U.js";import{_ as Mt,P as $e}from"./DtCdftDU.js";const St=["top","middle","bottom"],kt=ce({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>St.includes(e)}},setup(e,{slots:h}){const L=z(()=>e.align!==void 0?{verticalAlign:e.align}:null),l=z(()=>{const c=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(c!==void 0?` text-${c}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>j("div",{class:l.value,style:L.value,role:"status","aria-label":e.label},Je(h.default,e.label!==void 0?[e.label]:[]))}}),Dt=ce({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:h,emit:L}){let l=!1,c,p,C=null,m=null,r,x;function k(){c?.(),c=null,l=!1,C!==null&&(clearTimeout(C),C=null),m!==null&&(clearTimeout(m),m=null),p?.removeEventListener("transitionend",r),r=null}function w(v,A,b){A!==void 0&&(v.style.height=`${A}px`),v.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,l=!0,c=b}function O(v,A){v.style.overflowY=null,v.style.height=null,v.style.transition=null,k(),A!==x&&L(A)}function T(v,A){let b=0;p=v,l===!0?(k(),b=v.offsetHeight===v.scrollHeight?0:void 0):(x="hide",v.style.overflowY="hidden"),w(v,b,A),C=setTimeout(()=>{C=null,v.style.height=`${v.scrollHeight}px`,r=f=>{m=null,(Object(f)!==f||f.target===v)&&O(v,"show")},v.addEventListener("transitionend",r),m=setTimeout(r,e.duration*1.1)},100)}function N(v,A){let b;p=v,l===!0?k():(x="show",v.style.overflowY="hidden",b=v.scrollHeight),w(v,b,A),C=setTimeout(()=>{C=null,v.style.height=0,r=f=>{m=null,(Object(f)!==f||f.target===v)&&O(v,"hide")},v.addEventListener("transitionend",r),m=setTimeout(r,e.duration*1.1)},100)}return ke(()=>{l===!0&&k()}),()=>j(Ke,{css:!1,appear:e.appear,onEnter:T,onLeave:N},h.default)}}),ae=Ze({}),Ct=Object.keys(Be),Ot=ce({name:"QExpansionItem",props:{...Be,...et,...Xe,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...Ge,"click","afterShow","afterHide"],setup(e,{slots:h,emit:L}){const{proxy:{$q:l}}=Pe(),c=tt(e,l),p=D(e.modelValue!==null?e.modelValue:e.defaultOpened),C=D(null),m=nt(),{show:r,hide:x,toggle:k}=at({showing:p});let w,O;const T=z(()=>`q-expansion-item q-item-type q-expansion-item--${p.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),N=z(()=>e.contentInsetLevel===void 0?null:{["padding"+(l.lang.rtl===!0?"Right":"Left")]:e.contentInsetLevel*56+"px"}),v=z(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),A=z(()=>{const n={};return Ct.forEach(o=>{n[o]=e[o]}),n}),b=z(()=>v.value===!0||e.expandIconToggle!==!0),f=z(()=>e.expandedIcon!==void 0&&p.value===!0?e.expandedIcon:e.expandIcon||l.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),B=z(()=>e.disable!==!0&&(v.value===!0||e.expandIconToggle===!0)),u=z(()=>({expanded:p.value===!0,detailsId:m.value,toggle:k,show:r,hide:x})),t=z(()=>{const n=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:l.lang.label[p.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":p.value===!0?"true":"false","aria-controls":m.value,"aria-label":n}});Q(()=>e.group,n=>{O?.(),n!==void 0&&g()});function a(n){v.value!==!0&&k(n),L("click",n)}function i(n){n.keyCode===13&&$(n,!0)}function $(n,o){o!==!0&&n.qAvoidFocus!==!0&&C.value?.focus(),k(n),it(n)}function V(){L("afterShow")}function q(){L("afterHide")}function g(){w===void 0&&(w=lt()),p.value===!0&&(ae[e.group]=w);const n=Q(p,_=>{_===!0?ae[e.group]=w:ae[e.group]===w&&delete ae[e.group]}),o=Q(()=>ae[e.group],(_,M)=>{M===w&&_!==void 0&&_!==w&&x()});O=()=>{n(),o(),ae[e.group]===w&&delete ae[e.group],O=void 0}}function Y(){const n={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},o=[j(Te,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&p.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:f.value})];return B.value===!0&&(Object.assign(n,{tabindex:0,...t.value,onClick:$,onKeyup:i}),o.unshift(j("div",{ref:C,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),j(ye,n,()=>o)}function ie(){let n;return h.header!==void 0?n=[].concat(h.header(u.value)):(n=[j(ye,()=>[j(qe,{lines:e.labelLines},()=>e.label||""),e.caption?j(qe,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&n[e.switchToggleSide===!0?"push":"unshift"](j(ye,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>j(Te,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&n[e.switchToggleSide===!0?"unshift":"push"](Y()),n}function y(){const n={ref:"item",style:e.headerStyle,class:e.headerClass,dark:c.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return b.value===!0&&(n.clickable=!0,n.onClick=a,Object.assign(n,v.value===!0?A.value:t.value)),j(ze,n,ie)}function d(){return ot(j("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:N.value,id:m.value},Re(h.default)),[[st,p.value]])}function s(){const n=[y(),j(Dt,{duration:e.duration,onShow:V,onHide:q},d)];return e.expandSeparator===!0&&n.push(j(Oe,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:c.value}),j(Oe,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:c.value})),n}return e.group!==void 0&&g(),ke(()=>{O?.()}),()=>j("div",{class:T.value},[j("div",{class:"q-expansion-item__container relative-position"},s())])}}),{passive:le}=rt,Tt=ce({name:"QInfiniteScroll",props:{offset:{type:Number,default:500},debounce:{type:[String,Number],default:100},scrollTarget:ut,initialIndex:{type:Number,default:0},disable:Boolean,reverse:Boolean},emits:["load"],setup(e,{slots:h,emit:L}){const l=D(!1),c=D(!0),p=D(null),C=D(null);let m=e.initialIndex,r,x;const k=z(()=>"q-infinite-scroll__loading"+(l.value===!0?"":" invisible"));function w(){if(e.disable===!0||l.value===!0||c.value===!1)return;const i=de(r),$=_e(r),V=Ye(r);e.reverse===!1?Math.round($+V+e.offset)>=Math.round(i)&&O():Math.round($)<=e.offset&&O()}function O(){if(e.disable===!0||l.value===!0||c.value===!1)return;m++,l.value=!0;const i=de(r);L("load",m,$=>{c.value===!0&&(l.value=!1,ge(()=>{if(e.reverse===!0){const V=de(r),q=_e(r),g=V-i;xe(r,q+g)}$===!0?v():p.value&&p.value.closest("body")&&x()}))})}function T(){m=0}function N(){c.value===!1&&(c.value=!0,r.addEventListener("scroll",x,le)),w()}function v(){c.value===!0&&(c.value=!1,l.value=!1,r.removeEventListener("scroll",x,le),x?.cancel?.())}function A(){if(r&&c.value===!0&&r.removeEventListener("scroll",x,le),r=mt(p.value,e.scrollTarget),c.value===!0){if(r.addEventListener("scroll",x,le),e.reverse===!0){const i=de(r),$=Ye(r);xe(r,i-$)}w()}}function b(i){m=i}function f(i){i=parseInt(i,10);const $=x;x=i<=0?w:vt(w,isNaN(i)===!0?100:i),r&&c.value===!0&&($!==void 0&&r.removeEventListener("scroll",$,le),r.addEventListener("scroll",x,le))}function B(i){if(u.value===!0){if(C.value===null){i!==!0&&ge(()=>{B(!0)});return}const $=`${l.value===!0?"un":""}pauseAnimations`;Array.from(C.value.getElementsByTagName("svg")).forEach(V=>{V[$]()})}}const u=z(()=>e.disable!==!0&&c.value===!0);Q([l,u],()=>{B()}),Q(()=>e.disable,i=>{i===!0?v():N()}),Q(()=>e.reverse,()=>{l.value===!1&&c.value===!0&&w()}),Q(()=>e.scrollTarget,A),Q(()=>e.debounce,f);let t=!1;ct(()=>{t!==!1&&r&&xe(r,t)}),ft(()=>{t=r?_e(r):!1}),ke(()=>{c.value===!0&&r.removeEventListener("scroll",x,le)}),pe(()=>{f(e.debounce),A(),l.value===!1&&B()});const a=Pe();return Object.assign(a.proxy,{poll:()=>{x?.()},trigger:O,stop:v,reset:T,resume:N,setIndex:b,updateScrollTarget:A}),()=>{const i=dt(h.default,[]);return u.value===!0&&i[e.reverse===!1?"push":"unshift"](j("div",{ref:C,class:k.value},Re(h.loading))),j("div",{class:"q-infinite-scroll",ref:p},i)}}}),Yt='<circle cx="15" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="60" cy="15" r="9" fill-opacity=".3"><animate attributeName="r" from="9" to="9" begin="0s" dur="0.8s" values="9;15;9" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from=".5" to=".5" begin="0s" dur="0.8s" values=".5;1;.5" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="105" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle>',Lt=ce({name:"QSpinnerDots",props:ht,setup(e){const{cSize:h,classes:L}=gt(e);return()=>j("svg",{class:L.value,fill:"currentColor",width:h.value,height:h.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",innerHTML:Yt})}}),At={class:"w-full flex-col content-center"},qt={class:"w-full content-center"},It={class:"w-full flex flex-col"},Ht={class:"flex flex-row flex-wrap pt-1"},Nt=be({__name:"ConditionFilter",props:{filter:{type:Object,required:!0}},emits:["update:filter"],setup(e,{emit:h}){const{hashColor:L}=Ve(),l=Se(),c=De(),p=e,C=h,m=D({since:p.filter?.since||"",until:p.filter?.until||"",leEffective:p.filter?.leEffective||"",geEffective:p.filter?.geEffective||""}),r=D([]),x=D([]),k=D([]),w=z(()=>{const u=r.value.map(i=>{const $=i.repoUrl.split("/").pop().replace(".git","");i.commits?.split?.(",")?.length||i.commits;const V=i.nicknames?.split?.(",")?.length||0;return{label:$+" ("+V+" "+c.t("contributors")+")",value:i.repoUrl}}),t=[];for(const i of u||[])t.findIndex($=>$.value===i.value)<0&&t.push(i);t.sort((i,$)=>i.label.localeCompare($.label));const a=[{label:c.t("all"),value:""}];return a.push(...t),a}),O=D(!1);Q(()=>k.value,(u,t)=>{if(O.value)return;O.value=!0;const a=u.includes(""),i=t.includes("");i&&!a?k.value=[]:!i&&a?k.value=w.value.map($=>$.value):u.length==w.value.length-1&&!a?k.value.splice(0,0,""):u.length<w.value.length&&a&&(k.value=k.value.filter($=>!!$)),ge(()=>{O.value=!1})},{deep:!0});const T=D([]),N=z(()=>{const u=x.value.map(a=>({label:a.nickname,value:a.nickname}));u.sort((a,i)=>a.label.localeCompare(i.label));const t=[{label:c.t("all"),value:""}];return t.push(...u),t}),v=D(!1);Q(()=>T.value,(u,t)=>{if(v.value)return;v.value=!0;const a=u.includes(""),i=t.includes("");i&&!a?T.value=[]:!i&&a?T.value=N.value.map($=>$.value):u.length==N.value.length-1&&!a?T.value.splice(0,0,""):u.length<N.value.length&&a&&(T.value=T.value.filter($=>!!$)),ge(()=>{v.value=!1})},{deep:!0});const A=D();Q([m,k,T],()=>{clearTimeout(A.value),A.value=setTimeout(()=>{C("update:filter",{since:m.value?.since||"",until:m.value?.until||"",leEffective:m.value?.leEffective||"",geEffective:m.value?.geEffective||"",repos:k.value.filter(u=>!!u),authors:T.value.filter(u=>!!u)})},300)},{deep:!0});function b(u){if(u==="default"){m.value.since=ee().subtract(3,"month").startOf("month").format("YYYY-MM-DD"),m.value.until=ee().format("YYYY-MM-DD");return}if(u==="all"||!u){m.value.since="",m.value.until="";return}const[t,a]=f(u);m.value.since=t||"",m.value.until=a||""}function f(u){const t="YYYY-MM-DD",a=ee();switch(u){case"today":return[a.startOf("day").format(t),a.endOf("day").format(t)];case"yesterday":return[a.clone().subtract(1,"day").startOf("day").format(t),a.clone().subtract(1,"day").endOf("day").format(t)];case"thisWeek":return[a.startOf("week").format(t),a.endOf("week").format(t)];case"lastWeek":return[a.clone().subtract(1,"week").startOf("week").format(t),a.clone().subtract(1,"week").endOf("week").format(t)];case"beforeLastWeek":return[a.clone().subtract(2,"week").startOf("week").format(t),a.clone().subtract(2,"week").endOf("week").format(t)];case"thisMonth":return[a.startOf("month").format(t),a.endOf("month").format(t)];case"lastMonth":return[a.clone().subtract(1,"month").startOf("month").format(t),a.clone().subtract(1,"month").endOf("month").format(t)];case"beforeLastMonth":return[a.clone().subtract(2,"month").startOf("month").format(t),a.clone().subtract(2,"month").endOf("month").format(t)];default:return[]}}const B=()=>{l.getRepoBranches().then(u=>{const t=[];for(const a of u?.data||[]){const i=t.find($=>$.repoUrl===a.repoUrl);i?(i.commits=Math.max(i.commits,a.commits),i.additions=Math.max(i.additions,a.additions),i.deletions=Math.max(i.deletions,a.deletions),i.effectives=Math.max(i.effectives,a.effectives),i.nicknames=Array.from(new Set(i.nicknames.split(",").concat(a.nicknames.split(",")).filter($=>!!$))).join(","),i.branchName=Array.from(new Set(i.branchName.split(",").concat(a.branchName.split(",")).filter($=>!!$))).join(",")):t.push({repoUrl:a.repoUrl,branchName:a.branchName,commits:a.commits,nicknames:a.nicknames,additions:a.additions,deletions:a.deletions,effectives:a.effectives})}r.value=t}),l.getContributors().then(u=>{x.value=u.data})};return pe(()=>{B()}),(u,t)=>{const a=bt,i=yt,$=pt,V=Ot,q=_t,g=wt;return Z(),oe("div",At,[H("h6",qt,J(u.$t("conditionFilter")),1),H("div",It,[S(g,{bordered:"",class:"rounded-borders"},{default:F(()=>[S(V,{class:"w-full group1","expand-separator":"","default-opened":"",icon:"📅",label:u.$t("timeRange"),"header-class":"bg-primary"},{default:F(()=>[S($,{class:"w-full px-2 pb-2 max-h-[20vh] overflow-y-auto"},{default:F(()=>[H("div",Ht,[S(a,{class:"mx-0 p-1",flat:"",size:"xs",onClick:t[0]||(t[0]=Y=>b("default")),label:u.$t("default")},null,8,["label"]),S(a,{class:"mx-0 p-1",flat:"",size:"xs",onClick:t[1]||(t[1]=Y=>b("all")),label:u.$t("all")},null,8,["label"]),S(a,{class:"mx-0 p-1",flat:"",size:"xs",onClick:t[2]||(t[2]=Y=>b("today")),label:u.$t("today")},null,8,["label"]),S(a,{class:"mx-0 p-1",flat:"",size:"xs",onClick:t[3]||(t[3]=Y=>b("yesterday")),label:u.$t("yesterday")},null,8,["label"]),S(a,{class:"mx-0 p-1",flat:"",size:"xs",onClick:t[4]||(t[4]=Y=>b("thisWeek")),label:u.$t("weekThis")},null,8,["label"]),S(a,{class:"mx-0 p-1",flat:"",size:"xs",onClick:t[5]||(t[5]=Y=>b("lastWeek")),label:u.$t("weekLast")},null,8,["label"]),S(a,{class:"mx-0 p-1",flat:"",size:"xs",onClick:t[6]||(t[6]=Y=>b("beforeLastWeek")),label:u.$t("weekBeforeLast")},null,8,["label"]),S(a,{class:"mx-0 p-1",flat:"",size:"xs",onClick:t[7]||(t[7]=Y=>b("thisMonth")),label:u.$t("monthThis")},null,8,["label"]),S(a,{class:"mx-0 p-1",flat:"",size:"xs",onClick:t[8]||(t[8]=Y=>b("lastMonth")),label:u.$t("monthLast")},null,8,["label"]),S(a,{class:"mx-0 p-1",flat:"",size:"xs",onClick:t[9]||(t[9]=Y=>b("beforeLastMonth")),label:u.$t("monthBeforeLast")},null,8,["label"])]),S(i,{dense:"",modelValue:U(m).since,"onUpdate:modelValue":t[10]||(t[10]=Y=>U(m).since=Y),type:"date",clearable:"",prefix:u.$t("since"),min:"2025-01-01"},null,8,["modelValue","prefix"]),S(i,{dense:"",modelValue:U(m).until,"onUpdate:modelValue":t[11]||(t[11]=Y=>U(m).until=Y),type:"date",clearable:"",prefix:u.$t("until"),min:"2025-01-01"},null,8,["modelValue","prefix"]),S(i,{dense:"",modelValue:U(m).geEffective,"onUpdate:modelValue":t[12]||(t[12]=Y=>U(m).geEffective=Y),flat:"",clearable:"",type:"number",prefix:u.$t("effectives")+">="},null,8,["modelValue","prefix"]),S(i,{dense:"",modelValue:U(m).leEffective,"onUpdate:modelValue":t[13]||(t[13]=Y=>U(m).leEffective=Y),flat:"",clearable:"",type:"number",prefix:u.$t("effectives")+"<="},null,8,["modelValue","prefix"])]),_:1})]),_:1},8,["label"]),S(V,{class:"w-full group3 nowrap",dense:"","expand-separator":"","default-opened":"",icon:"👥",label:u.$t("contributors"),"header-class":"bg-primary"},{default:F(()=>[S($,{class:"w-full pl-2 pb-2 max-h-[20vh] overflow-y-auto"},{default:F(()=>[S(q,{class:"w-full text-nowrap flex-wrap",dense:"",modelValue:U(T),"onUpdate:modelValue":t[14]||(t[14]=Y=>X(T)?T.value=Y:null),options:U(N),type:"checkbox"},{label:F(Y=>[H("span",{class:"text-[10px]",style:we({color:U(L)(Y.label)})},J(Y.label),5)]),_:1},8,["modelValue","options"])]),_:1})]),_:1},8,["label"]),S(V,{class:"w-full group1",dense:"","expand-separator":"","default-opened":"",icon:"🌿",label:u.$t("repos"),"header-class":"bg-primary"},{default:F(()=>[S($,{class:"w-full pl-2 pb-2 max-h-[20vh] overflow-y-auto"},{default:F(()=>[S(q,{class:"w-full",dense:"",modelValue:U(k),"onUpdate:modelValue":t[15]||(t[15]=Y=>X(k)?k.value=Y:null),options:U(w),type:"checkbox"},{label:F(Y=>[H("span",{class:"text-[8px]",style:we({color:U(L)("#"+Y.label?.split("-")?.[0]?.toLowerCase?.()+"-")})},J(Y.label),5)]),_:1},8,["modelValue","options"])]),_:1})]),_:1},8,["label"])]),_:1})])])}}}),Ie=Object.assign(Ce(Nt,[["__scopeId","data-v-6f3c4344"]]),{__name:"AynalisisConditionFilter"});function Ut(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var he={exports:{}},Et=he.exports,He;function Vt(){return He||(He=1,(function(e,h){(function(L,l){e.exports=l()})(Et,(function(){var L=1e3,l=6e4,c=36e5,p="millisecond",C="second",m="minute",r="hour",x="day",k="week",w="month",O="quarter",T="year",N="date",v="Invalid Date",A=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,b=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,f={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(y){var d=["th","st","nd","rd"],s=y%100;return"["+y+(d[(s-20)%10]||d[s]||d[0])+"]"}},B=function(y,d,s){var n=String(y);return!n||n.length>=d?y:""+Array(d+1-n.length).join(s)+y},u={s:B,z:function(y){var d=-y.utcOffset(),s=Math.abs(d),n=Math.floor(s/60),o=s%60;return(d<=0?"+":"-")+B(n,2,"0")+":"+B(o,2,"0")},m:function y(d,s){if(d.date()<s.date())return-y(s,d);var n=12*(s.year()-d.year())+(s.month()-d.month()),o=d.clone().add(n,w),_=s-o<0,M=d.clone().add(n+(_?-1:1),w);return+(-(n+(s-o)/(_?o-M:M-o))||0)},a:function(y){return y<0?Math.ceil(y)||0:Math.floor(y)},p:function(y){return{M:w,y:T,w:k,d:x,D:N,h:r,m,s:C,ms:p,Q:O}[y]||String(y||"").toLowerCase().replace(/s$/,"")},u:function(y){return y===void 0}},t="en",a={};a[t]=f;var i="$isDayjsObject",$=function(y){return y instanceof Y||!(!y||!y[i])},V=function y(d,s,n){var o;if(!d)return t;if(typeof d=="string"){var _=d.toLowerCase();a[_]&&(o=_),s&&(a[_]=s,o=_);var M=d.split("-");if(!o&&M.length>1)return y(M[0])}else{var I=d.name;a[I]=d,o=I}return!n&&o&&(t=o),o||!n&&t},q=function(y,d){if($(y))return y.clone();var s=typeof d=="object"?d:{};return s.date=y,s.args=arguments,new Y(s)},g=u;g.l=V,g.i=$,g.w=function(y,d){return q(y,{locale:d.$L,utc:d.$u,x:d.$x,$offset:d.$offset})};var Y=(function(){function y(s){this.$L=V(s.locale,null,!0),this.parse(s),this.$x=this.$x||s.x||{},this[i]=!0}var d=y.prototype;return d.parse=function(s){this.$d=(function(n){var o=n.date,_=n.utc;if(o===null)return new Date(NaN);if(g.u(o))return new Date;if(o instanceof Date)return new Date(o);if(typeof o=="string"&&!/Z$/i.test(o)){var M=o.match(A);if(M){var I=M[2]-1||0,E=(M[7]||"0").substring(0,3);return _?new Date(Date.UTC(M[1],I,M[3]||1,M[4]||0,M[5]||0,M[6]||0,E)):new Date(M[1],I,M[3]||1,M[4]||0,M[5]||0,M[6]||0,E)}}return new Date(o)})(s),this.init()},d.init=function(){var s=this.$d;this.$y=s.getFullYear(),this.$M=s.getMonth(),this.$D=s.getDate(),this.$W=s.getDay(),this.$H=s.getHours(),this.$m=s.getMinutes(),this.$s=s.getSeconds(),this.$ms=s.getMilliseconds()},d.$utils=function(){return g},d.isValid=function(){return this.$d.toString()!==v},d.isSame=function(s,n){var o=q(s);return this.startOf(n)<=o&&o<=this.endOf(n)},d.isAfter=function(s,n){return q(s)<this.startOf(n)},d.isBefore=function(s,n){return this.endOf(n)<q(s)},d.$g=function(s,n,o){return g.u(s)?this[n]:this.set(o,s)},d.unix=function(){return Math.floor(this.valueOf()/1e3)},d.valueOf=function(){return this.$d.getTime()},d.startOf=function(s,n){var o=this,_=!!g.u(n)||n,M=g.p(s),I=function(ne,W){var G=g.w(o.$u?Date.UTC(o.$y,W,ne):new Date(o.$y,W,ne),o);return _?G:G.endOf(x)},E=function(ne,W){return g.w(o.toDate()[ne].apply(o.toDate("s"),(_?[0,0,0,0]:[23,59,59,999]).slice(W)),o)},P=this.$W,R=this.$M,K=this.$D,se="set"+(this.$u?"UTC":"");switch(M){case T:return _?I(1,0):I(31,11);case w:return _?I(1,R):I(0,R+1);case k:var te=this.$locale().weekStart||0,re=(P<te?P+7:P)-te;return I(_?K-re:K+(6-re),R);case x:case N:return E(se+"Hours",0);case r:return E(se+"Minutes",1);case m:return E(se+"Seconds",2);case C:return E(se+"Milliseconds",3);default:return this.clone()}},d.endOf=function(s){return this.startOf(s,!1)},d.$set=function(s,n){var o,_=g.p(s),M="set"+(this.$u?"UTC":""),I=(o={},o[x]=M+"Date",o[N]=M+"Date",o[w]=M+"Month",o[T]=M+"FullYear",o[r]=M+"Hours",o[m]=M+"Minutes",o[C]=M+"Seconds",o[p]=M+"Milliseconds",o)[_],E=_===x?this.$D+(n-this.$W):n;if(_===w||_===T){var P=this.clone().set(N,1);P.$d[I](E),P.init(),this.$d=P.set(N,Math.min(this.$D,P.daysInMonth())).$d}else I&&this.$d[I](E);return this.init(),this},d.set=function(s,n){return this.clone().$set(s,n)},d.get=function(s){return this[g.p(s)]()},d.add=function(s,n){var o,_=this;s=Number(s);var M=g.p(n),I=function(R){var K=q(_);return g.w(K.date(K.date()+Math.round(R*s)),_)};if(M===w)return this.set(w,this.$M+s);if(M===T)return this.set(T,this.$y+s);if(M===x)return I(1);if(M===k)return I(7);var E=(o={},o[m]=l,o[r]=c,o[C]=L,o)[M]||1,P=this.$d.getTime()+s*E;return g.w(P,this)},d.subtract=function(s,n){return this.add(-1*s,n)},d.format=function(s){var n=this,o=this.$locale();if(!this.isValid())return o.invalidDate||v;var _=s||"YYYY-MM-DDTHH:mm:ssZ",M=g.z(this),I=this.$H,E=this.$m,P=this.$M,R=o.weekdays,K=o.months,se=o.meridiem,te=function(W,G,ue,fe){return W&&(W[G]||W(n,_))||ue[G].slice(0,fe)},re=function(W){return g.s(I%12||12,W,"0")},ne=se||function(W,G,ue){var fe=W<12?"AM":"PM";return ue?fe.toLowerCase():fe};return _.replace(b,(function(W,G){return G||(function(ue){switch(ue){case"YY":return String(n.$y).slice(-2);case"YYYY":return g.s(n.$y,4,"0");case"M":return P+1;case"MM":return g.s(P+1,2,"0");case"MMM":return te(o.monthsShort,P,K,3);case"MMMM":return te(K,P);case"D":return n.$D;case"DD":return g.s(n.$D,2,"0");case"d":return String(n.$W);case"dd":return te(o.weekdaysMin,n.$W,R,2);case"ddd":return te(o.weekdaysShort,n.$W,R,3);case"dddd":return R[n.$W];case"H":return String(I);case"HH":return g.s(I,2,"0");case"h":return re(1);case"hh":return re(2);case"a":return ne(I,E,!0);case"A":return ne(I,E,!1);case"m":return String(E);case"mm":return g.s(E,2,"0");case"s":return String(n.$s);case"ss":return g.s(n.$s,2,"0");case"SSS":return g.s(n.$ms,3,"0");case"Z":return M}return null})(W)||M.replace(":","")}))},d.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},d.diff=function(s,n,o){var _,M=this,I=g.p(n),E=q(s),P=(E.utcOffset()-this.utcOffset())*l,R=this-E,K=function(){return g.m(M,E)};switch(I){case T:_=K()/12;break;case w:_=K();break;case O:_=K()/3;break;case k:_=(R-P)/6048e5;break;case x:_=(R-P)/864e5;break;case r:_=R/c;break;case m:_=R/l;break;case C:_=R/L;break;default:_=R}return o?_:g.a(_)},d.daysInMonth=function(){return this.endOf(w).$D},d.$locale=function(){return a[this.$L]},d.locale=function(s,n){if(!s)return this.$L;var o=this.clone(),_=V(s,n,!0);return _&&(o.$L=_),o},d.clone=function(){return g.w(this.$d,this)},d.toDate=function(){return new Date(this.valueOf())},d.toJSON=function(){return this.isValid()?this.toISOString():null},d.toISOString=function(){return this.$d.toISOString()},d.toString=function(){return this.$d.toUTCString()},y})(),ie=Y.prototype;return q.prototype=ie,[["$ms",p],["$s",C],["$m",m],["$H",r],["$W",x],["$M",w],["$y",T],["$D",N]].forEach((function(y){ie[y[1]]=function(d){return this.$g(d,y[0],y[1])}})),q.extend=function(y,d){return y.$i||(y(d,Y,q),y.$i=!0),q},q.locale=V,q.isDayjs=$,q.unix=function(y){return q(1e3*y)},q.en=a[t],q.Ls=a,q.p={},q}))})(he)),he.exports}var jt=Vt();const Ne=Ut(jt),Bt={__name:"AynalisisHeatMapCard",props:{title:{type:String},commitsAll:{type:Array,required:!0},commits:{type:Array,required:!0}},setup(e){const h=De(),L=e,l=(p=90)=>{const C=(L.commitsAll||L.commits||[]).filter(b=>!!b.date).map(b=>[b.date.slice(0,10),b.commits||0]).sort((b,f)=>b[0].localeCompare(f[0])),m=Ne();if(!C||C.length===0){const b=m;return[b.subtract(p-1,"day").format("YYYY-MM-DD"),b.format("YYYY-MM-DD")]}const r=C.map(b=>Ne(b[0])).sort((b,f)=>b-f),x=r[0],k=r[r.length-1],w=k.diff(x,"day")+1;if(w>=p)return[x.format("YYYY-MM-DD"),k.format("YYYY-MM-DD")];const O=p-w,T=Math.floor(O/2),N=O-T;let v=x.subtract(T,"day"),A=k.add(N,"day");if(A.isAfter(m)){const b=A.diff(m,"day");A=m,v=v.subtract(b,"day")}return[v.format("YYYY-MM-DD"),A.format("YYYY-MM-DD")]},c=z(()=>{const p=(L.commits||[]).filter(r=>!!r.date).map(r=>[r.date.slice(0,10),r.commits||0]).sort((r,x)=>r[0].localeCompare(x[0])),C=l(),m=Math.max(...p.map(r=>r[1]),1);return{title:{text:L.title||h.t("commitHeatmap"),left:"center",top:10,textStyle:{fontSize:15,fontWeight:"bold"}},tooltip:{position:"top",formatter:r=>{const[x,k]=r.data;return`${x}<br/><b>${k}</b> ${h.t("commits")}`}},visualMap:{type:"piecewise",show:!0,min:0,max:m,calculable:!0,orient:"horizontal",left:"center",top:20,inRange:{color:["#e6f7ff","#91d5ff","#1890ff","#003a8c"]}},calendar:{top:80,left:20,right:20,bottom:10,cellSize:["auto",14],range:C,itemStyle:{borderWidth:.4,borderColor:"#ccc"},yearLabel:{show:!1},monthLabel:{nameMap:"cn",color:"#555",fontSize:10},dayLabel:{firstDay:1,nameMap:"cn",color:"#888",fontSize:9}},series:[{type:"heatmap",coordinateSystem:"calendar",data:p,emphasis:{focus:"self",itemStyle:{borderColor:"#333",borderWidth:1}}}]}});return(p,C)=>{const m=Qe;return Z(),Me(m,{class:"w-full h-[400px] border border-gray-200",option:U(c),autoresize:""},null,8,["option"])}}},me=Ce(Bt,[["__scopeId","data-v-a87cda31"]]),Pt={class:"w-full pl-4 pr-4 flex-col"},zt={class:"w-full content-center"},Rt={class:"w-full h-[calc(100vh-130px)] overflow-y-scroll flex flex-col items-center"},Wt=be({__name:"AnalysisView",props:{filter:{type:Object,required:!0}},setup(e){const h=Se(),L=D([]),l=D(""),c=D(""),p=D([]),C=D([]),m=D([]),r=D([]),x=D([]),k=D([]),w=D([]),O=e;Q(()=>O.filter,()=>{T()},{deep:!0});const T=async()=>{h.getRanking(O.filter).then(f=>{L.value=f?.data||[],l.value=f?.meta?.since||l.value,c.value=f?.meta?.until||c.value}),h.getCommitHeatmap({...O.filter,messageType:""}).then(f=>{p.value=f?.data||[],l.value=f?.meta?.since||l.value,c.value=f?.meta?.until||c.value}),h.getCommitHeatmap({...O.filter,messageType:"fix"}).then(f=>{C.value=f?.data||[],l.value=f?.meta?.since||l.value,c.value=f?.meta?.until||c.value}),h.getCommitHeatmap({...O.filter,messageType:"feat"}).then(f=>{m.value=f?.data||[],l.value=f?.meta?.since||l.value,c.value=f?.meta?.until||c.value}),h.getCommitHeatmap({...O.filter,messageType:"",isMerge:"1"}).then(f=>{r.value=f?.data||[],l.value=f?.meta?.since||l.value,c.value=f?.meta?.until||c.value}),h.getCommitPeriod({...O.filter,period:"day"}).then(f=>{x.value=f?.data||[],l.value=f?.meta?.since||l.value,c.value=f?.meta?.until||c.value}),h.getCommitPeriod({...O.filter,period:"week"}).then(f=>{k.value=f?.data||[],l.value=f?.meta?.since||l.value,c.value=f?.meta?.until||c.value}),h.getCommitPeriod({...O.filter,period:"month"}).then(f=>{w.value=f?.data||[],l.value=f?.meta?.since||l.value,c.value=f?.meta?.until||c.value})},N=D(),v=()=>{clearTimeout(N.value),N.value=setTimeout(()=>{T()},300)},A=D(),b=D(!0);return pe(()=>{v(),A.value=je(()=>{b.value&&v()},3e4)}),We(()=>{clearInterval(A.value)}),(f,B)=>{const u=Fe;return Z(),oe("div",Pt,[H("h6",zt,[ve(J(f.$t("analysisView"))+" ",1),S(u,{class:"text-xs ml-16",dense:"",modelValue:b.value,"onUpdate:modelValue":B[0]||(B[0]=t=>b.value=t),label:f.$t("autoRefresh")},null,8,["modelValue","label"])]),H("div",Rt,[H("div",{class:Le(["w-full flex flex-col",f.$q.screen.gt.sm?"max-w-[700px]":"w-full"])},[S(Mt,{class:Le(f.$q.screen.gt.sm?"max-w-[700px]":"w-full"),authors:L.value,since:l.value,until:c.value,sortBy:"effectives",sortDirection:"desc",hideColumns:["name","email"]},null,8,["class","authors","since","until"]),S($e,{commits:x.value,year:l.value,title:f.$t("commitPeriod")},null,8,["commits","year","title"]),S($e,{commits:k.value,year:l.value,title:f.$t("commitPeriod")},null,8,["commits","year","title"]),S($e,{commits:w.value,year:l.value,title:f.$t("commitPeriod")},null,8,["commits","year","title"]),S(me,{commits:p.value,commitsAll:p.value,year:l.value,title:f.$t("commitHeatmap")},null,8,["commits","commitsAll","year","title"]),S(me,{commits:C.value,commitsAll:p.value,year:l.value,title:f.$t("fixHeatmap")},null,8,["commits","commitsAll","year","title"]),S(me,{commits:m.value,commitsAll:p.value,year:l.value,title:f.$t("featHeatmap")},null,8,["commits","commitsAll","year","title"]),S(me,{commits:r.value,commitsAll:p.value,year:l.value,title:f.$t("mergeHeatmap")},null,8,["commits","commitsAll","year","title"])],2)])])}}}),Ue=Object.assign(Wt,{__name:"AynalisisAnalysisView"}),Ft=()=>{const{locale:e}=De();return Q(()=>e.value,()=>{ee.locale(e.value)}),{localDate:(l,c=null)=>(c=c||"YYYY-MM-DD HH:mm:ss",ee(l||new Date).format(c)),fromNow:l=>ee(l||new Date).fromNow()}},Qt={class:"w-full flex nowrap content-center"},Jt=["onClick"],Kt={class:"w-full text-[10px] text-blue-900 font-bold nowrap"},Zt={class:"w-full text-black-600 text-[10px] break-all"},Gt={class:"w-full flex justify-between text-xs text-gray-500"},Xt={class:"text-[8px]"},en={class:"text-green text-[10px]"},tn={class:"text-red text-[10px]"},nn={class:"text-purple text-[10px]"},an={class:"w-full flex justify-between"},ln={class:"row justify-center q-my-md"},on=be({__name:"CommitLogs",props:{filter:Object},setup(e){const h=Se(),L=Ft(),{open:l}=xt(),{hashColor:c}=Ve(),p=D(0),C=D(20),m=D(!1),r=D(!0),x=D(0),k=D(),w=D({}),O=D([]),T=e,N=z(()=>JSON.stringify(T.filter)),v=u=>{const a=(w.value.config||[]).find(i=>u.repoUrl.indexOf(i.domain)!==-1)?.commitUrlTmpl;if(a){const i=a.replace("{{.RepoUrl}}",u.repoUrl.replace(".git","")).replace("{{.BranchName}}",u.branchName).replace("{{.CommitHash}}",u.commitHash);l(i)}else{const i=`${u.repoUrl.replace(".git","")}/commit/${u.commitHash}?branch=${u.branchName}`;l(i)}},A=async(u,t)=>{if(m.value||!r.value){t?.(!r.value);return}m.value=!0;try{u!==void 0&&u>=1&&(p.value=(u-1)*C.value);const a=await h.getCommitLogs(T.filter,p.value,C.value);a.code===200?(p.value===0&&(O.value=[]),O.value.push(...a.data),w.value=a.meta,r.value=a.data.length>=C.value,t?.(!r.value)):(r.value=!1,t?.(!0))}catch(a){console.error("加载提交日志失败:",a),r.value=!1,t?.(!0)}finally{m.value=!1}};Q(N,()=>{b()},{deep:!0});const b=()=>{p.value=0,r.value=!0,m.value=!1,O.value=[],x.value+=1,k.value&&(k.value.reset(),setTimeout(()=>{A()},0))},f=D(),B=D(!0);return pe(()=>{b(),f.value=je(()=>{B.value&&b()},3e4)}),We(()=>{f.value&&clearInterval(f.value)}),(u,t)=>{const a=Fe,i=kt,$=ze,V=Lt,q=Tt;return Z(),oe(Ae,null,[H("h6",Qt,[ve(" 📝 "+J(u.$t("commitLogs"))+" ",1),S(a,{class:"text-xs ml-16",dense:"",modelValue:B.value,"onUpdate:modelValue":t[0]||(t[0]=g=>B.value=g),label:u.$t("autoRefresh")},null,8,["modelValue","label"])]),(Z(),Me(q,{key:x.value,ref_key:"infiniteScroll",ref:k,class:"w-full h-[calc(100vh-150px)] overflow-auto",offset:100,onLoad:A},{loading:F(()=>[H("div",ln,[S(V,{color:"primary",size:"40px"})])]),default:F(()=>[(Z(!0),oe(Ae,null,$t(O.value,(g,Y)=>(Z(),Me($,{class:"w-full",key:g.commitHash},{default:F(()=>[H("div",{class:"w-full flex flex-col cursor-pointer",onClick:ie=>v(g)},[H("div",Kt," 🏷️ "+J(g.commitHash),1),H("div",Zt,J(g.message),1),H("div",Gt,[H("div",Xt,J(g.repoUrl.split("/").pop().replace(".git","")+"/"+g.branchName),1),H("div",en,"+"+J(g.additions),1),H("div",tn,"-"+J(g.deletions),1),H("div",nn,"+"+J(g.effectives),1)]),H("div",an,[S(i,{class:"text-xs",style:we({backgroundColor:U(c)(g.nickname),color:"#fff"})},{default:F(()=>[ve(J(g.nickname),1)]),_:2},1032,["style"]),S(i,{class:"text-[10px]",color:"secondary"},{default:F(()=>[ve("⏰ "+J(U(L).localDate(g.date)),1)]),_:2},1024)])],8,Jt)]),_:2},1024))),128))]),_:1}))],64)}}}),Ee=Object.assign(on,{__name:"AynalisisCommitLogs"}),sn={class:"w-full content-center"},rn={class:"w-full max-w-[1600px]"},un={key:0,class:"flex nowrap w-full h-full"},cn={class:"w-[320px] h-[calc(100vh-130px)]"},fn={class:"w-[calc(100%-640px)] h-[calc(100vh-130px)]"},dn={class:"w-[320px] h-[calc(100vh-130px)]"},mn={key:1,class:"flex nowrap w-full h-full"},vn={class:"w-full content-center"},hn={class:"w-full min-h-[120px]"},gn={class:"w-full min-h-[120px]"},pn=be({__name:"index",setup(e){const h=D({since:ee().subtract(3,"month").startOf("month").format("YYYY-MM-DD"),until:ee().format("YYYY-MM-DD"),leEffective:"",geEffective:"",branches:[],contributors:[]});return(L,l)=>(Z(),oe("div",sn,[H("div",rn,[L.$q.screen.gt.sm?(Z(),oe("div",un,[H("div",cn,[S(Ie,{filter:U(h),"onUpdate:filter":l[0]||(l[0]=c=>X(h)?h.value=c:null)},null,8,["filter"])]),H("div",fn,[S(Ue,{filter:U(h),"onUpdate:filter":l[1]||(l[1]=c=>X(h)?h.value=c:null)},null,8,["filter"])]),H("div",dn,[S(Ee,{filter:U(h),"onUpdate:filter":l[2]||(l[2]=c=>X(h)?h.value=c:null)},null,8,["filter"])])])):(Z(),oe("div",mn,[H("div",vn,[S(Ie,{filter:U(h),"onUpdate:filter":l[3]||(l[3]=c=>X(h)?h.value=c:null)},null,8,["filter"])]),H("div",hn,[S(Ue,{filter:U(h),"onUpdate:filter":l[4]||(l[4]=c=>X(h)?h.value=c:null)},null,8,["filter"])]),H("div",gn,[S(Ee,{filter:U(h),"onUpdate:filter":l[5]||(l[5]=c=>X(h)?h.value=c:null)},null,8,["filter"])])]))])]))}}),Sn=Ce(pn,[["__scopeId","data-v-24417b4d"]]);export{Sn as default};
